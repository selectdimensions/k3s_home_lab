2025-06-18T22:00:00.009288 INFO   [main] [Bolt::Logger] Loaded project from '/home/boltuser/workspace/puppet'
2025-06-18T22:00:00.010446 DEBUG  [main] [Bolt::Logger] Analytics opt-out is set, analytics will be disabled
2025-06-18T22:00:00.012564 DEBUG  [main] [Bolt::Executor] Started with 100 max thread(s)
2025-06-18T22:00:00.013781 DEBUG  [main] [Bolt::PAL] Loading modules from /usr/local/bundle/gems/bolt-4.0.0/bolt-modules:/home/boltuser/workspace/puppet/site-modules:/home/boltuser/workspace/puppet/modules:/home/boltuser/workspace/puppet/.modules:/usr/local/bundle/gems/bolt-4.0.0/modules
2025-06-18T22:00:00.019599 DEBUG  [main] [Bolt::Inventory] Loaded inventory from /home/boltuser/workspace/inventory.yaml
2025-06-18T22:00:00.477622 INFO   [event-publisher] [Bolt::Outputter::Logger] Starting: plan pi_cluster_automation::deploy
2025-06-18T22:00:00.478436 INFO   [event-publisher] [Bolt::Outputter::Logger] Starting deployment on environment: dev
2025-06-18T22:00:00.481209 INFO   [event-publisher] [Bolt::Outputter::Logger] Found 1 master(s) and 3 worker(s)
2025-06-18T22:00:00.483001 INFO   [event-publisher] [Bolt::Outputter::Logger] Phase 1: Configuring base system on all nodes
2025-06-18T22:00:00.484075 INFO   [event-publisher] [Bolt::Outputter::Logger] Starting: command 'apt-get update' on pi-master, pi-worker-1, pi-worker-2, pi-worker-3
2025-06-18T22:00:00.529765 INFO   [exec-worker-1] [Bolt::Executor] Running command 'apt-get update' on ["pi-master"]
2025-06-18T22:00:00.531042 DEBUG  [exec-worker-1] [Bolt::Transport::SSH] Running command 'apt-get update' on pi-master
2025-06-18T22:00:00.530340 INFO   [exec-worker-3] [Bolt::Executor] Running command 'apt-get update' on ["pi-worker-2"]
2025-06-18T22:00:00.532941 DEBUG  [exec-worker-3] [Bolt::Transport::SSH] Running command 'apt-get update' on pi-worker-2
2025-06-18T22:00:00.530148 INFO   [exec-worker-2] [Bolt::Executor] Running command 'apt-get update' on ["pi-worker-1"]
2025-06-18T22:00:00.534387 DEBUG  [exec-worker-2] [Bolt::Transport::SSH] Running command 'apt-get update' on pi-worker-1
2025-06-18T22:00:00.530657 INFO   [exec-worker-4] [Bolt::Executor] Running command 'apt-get update' on ["pi-worker-3"]
2025-06-18T22:00:00.536141 DEBUG  [exec-worker-4] [Bolt::Transport::SSH] Running command 'apt-get update' on pi-worker-3
2025-06-18T22:00:00.537301 DEBUG  [exec-worker-2] [pi-worker-1] Disabling use_agent in net-ssh: ssh-agent is not available
2025-06-18T22:00:00.537425 DEBUG  [exec-worker-1] [pi-master] Disabling use_agent in net-ssh: ssh-agent is not available
2025-06-18T22:00:00.538619 DEBUG  [exec-worker-3] [pi-worker-2] Disabling use_agent in net-ssh: ssh-agent is not available
2025-06-18T22:00:00.539457 DEBUG  [exec-worker-4] [pi-worker-3] Disabling use_agent in net-ssh: ssh-agent is not available
2025-06-18T22:00:02.372973 INFO   [exec-worker-4] [Bolt::Executor] {"target":"pi-worker-3","action":"command","object":"apt-get update","status":"success","value":{"stdout":"Hit:1 http://deb.debian.org/debian bookworm InRelease\nHit:2 http://deb.debian.org/debian-security bookworm-security InRelease\nHit:3 http://deb.debian.org/debian bookworm-updates InRelease\nHit:4 http://archive.raspberrypi.com/debian bookworm InRelease\nReading package lists...\n","stderr":"","merged_output":"Hit:1 http://deb.debian.org/debian bookworm InRelease\nHit:2 http://deb.debian.org/debian-security bookworm-security InRelease\nHit:3 http://deb.debian.org/debian bookworm-updates InRelease\nHit:4 http://archive.raspberrypi.com/debian bookworm InRelease\nReading package lists...\n","exit_code":0}}
2025-06-18T22:00:02.416581 INFO   [exec-worker-1] [Bolt::Executor] {"target":"pi-master","action":"command","object":"apt-get update","status":"success","value":{"stdout":"Hit:1 http://deb.debian.org/debian bookworm InRelease\nHit:2 http://deb.debian.org/debian-security bookworm-security InRelease\nHit:3 http://deb.debian.org/debian bookworm-updates InRelease\nHit:4 http://archive.raspberrypi.com/debian bookworm InRelease\nReading package lists...\n","stderr":"","merged_output":"Hit:1 http://deb.debian.org/debian bookworm InRelease\nHit:2 http://deb.debian.org/debian-security bookworm-security InRelease\nHit:3 http://deb.debian.org/debian bookworm-updates InRelease\nHit:4 http://archive.raspberrypi.com/debian bookworm InRelease\nReading package lists...\n","exit_code":0}}
2025-06-18T22:00:02.447925 INFO   [exec-worker-3] [Bolt::Executor] {"target":"pi-worker-2","action":"command","object":"apt-get update","status":"success","value":{"stdout":"Hit:1 http://deb.debian.org/debian bookworm InRelease\nHit:2 http://deb.debian.org/debian-security bookworm-security InRelease\nHit:3 http://deb.debian.org/debian bookworm-updates InRelease\nHit:4 http://archive.raspberrypi.com/debian bookworm InRelease\nReading package lists...\n","stderr":"","merged_output":"Hit:1 http://deb.debian.org/debian bookworm InRelease\nHit:2 http://deb.debian.org/debian-security bookworm-security InRelease\nHit:3 http://deb.debian.org/debian bookworm-updates InRelease\nHit:4 http://archive.raspberrypi.com/debian bookworm InRelease\nReading package lists...\n","exit_code":0}}
2025-06-18T22:00:02.450184 INFO   [exec-worker-2] [Bolt::Executor] {"target":"pi-worker-1","action":"command","object":"apt-get update","status":"success","value":{"stdout":"Hit:1 http://deb.debian.org/debian bookworm InRelease\nHit:2 http://deb.debian.org/debian-security bookworm-security InRelease\nHit:3 http://deb.debian.org/debian bookworm-updates InRelease\nHit:4 http://archive.raspberrypi.com/debian bookworm InRelease\nReading package lists...\n","stderr":"","merged_output":"Hit:1 http://deb.debian.org/debian bookworm InRelease\nHit:2 http://deb.debian.org/debian-security bookworm-security InRelease\nHit:3 http://deb.debian.org/debian bookworm-updates InRelease\nHit:4 http://archive.raspberrypi.com/debian bookworm InRelease\nReading package lists...\n","exit_code":0}}
2025-06-18T22:00:02.451169 INFO   [exec-worker-2] [Bolt::Executor] Running command 'apt-get install -y curl wget git vim htop apt-transport-https ca-certificates software-properties-common' on ["pi-master"]
2025-06-18T22:00:02.451950 DEBUG  [exec-worker-2] [Bolt::Transport::SSH] Running command 'apt-get install -y curl wget git vim htop apt-transport-https ca-certificates software-properties-common' on pi-master
2025-06-18T22:00:02.451489 INFO   [exec-worker-1] [Bolt::Executor] Running command 'apt-get install -y curl wget git vim htop apt-transport-https ca-certificates software-properties-common' on ["pi-worker-2"]
2025-06-18T22:00:02.452945 DEBUG  [exec-worker-1] [Bolt::Transport::SSH] Running command 'apt-get install -y curl wget git vim htop apt-transport-https ca-certificates software-properties-common' on pi-worker-2
2025-06-18T22:00:02.451831 INFO   [event-publisher] [Bolt::Outputter::Logger] Finished: command 'apt-get update' with 0 failures in 1.97 sec
2025-06-18T22:00:02.451214 INFO   [exec-worker-3] [Bolt::Executor] Running command 'apt-get install -y curl wget git vim htop apt-transport-https ca-certificates software-properties-common' on ["pi-worker-1"]
2025-06-18T22:00:02.454140 DEBUG  [exec-worker-3] [Bolt::Transport::SSH] Running command 'apt-get install -y curl wget git vim htop apt-transport-https ca-certificates software-properties-common' on pi-worker-1
2025-06-18T22:00:02.453813 INFO   [event-publisher] [Bolt::Outputter::Logger] Starting: command 'apt-get install -y curl wget git vim htop apt-transport-https ca-certificates software-properties-common' on pi-master, pi-worker-1, pi-worker-2, pi-worker-3
2025-06-18T22:00:02.454223 DEBUG  [exec-worker-2] [pi-master] Disabling use_agent in net-ssh: ssh-agent is not available
2025-06-18T22:00:02.451722 INFO   [exec-worker-4] [Bolt::Executor] Running command 'apt-get install -y curl wget git vim htop apt-transport-https ca-certificates software-properties-common' on ["pi-worker-3"]
2025-06-18T22:00:02.456110 DEBUG  [exec-worker-4] [Bolt::Transport::SSH] Running command 'apt-get install -y curl wget git vim htop apt-transport-https ca-certificates software-properties-common' on pi-worker-3
2025-06-18T22:00:02.454629 DEBUG  [exec-worker-1] [pi-worker-2] Disabling use_agent in net-ssh: ssh-agent is not available
2025-06-18T22:00:02.456811 DEBUG  [exec-worker-3] [pi-worker-1] Disabling use_agent in net-ssh: ssh-agent is not available
2025-06-18T22:00:02.459520 DEBUG  [exec-worker-4] [pi-worker-3] Disabling use_agent in net-ssh: ssh-agent is not available
2025-06-18T22:00:03.582261 INFO   [exec-worker-1] [Bolt::Executor] {"target":"pi-worker-2","action":"command","object":"apt-get install -y curl wget git vim htop apt-transport-https ca-certificates software-properties-common","status":"success","value":{"stdout":"Reading package lists...\nBuilding dependency tree...\nReading state information...\ncurl is already the newest version (7.88.1-10+deb12u12).\nwget is already the newest version (1.21.3-1+deb12u1).\ngit is already the newest version (1:2.39.5-0+deb12u2).\nvim is already the newest version (2:9.0.1378-2+deb12u2).\nhtop is already the newest version (3.2.2-2).\napt-transport-https is already the newest version (2.6.1).\nca-certificates is already the newest version (20230311+deb12u1).\nsoftware-properties-common is already the newest version (0.99.30-4.1~deb12u1).\n0 upgraded, 0 newly installed, 0 to remove and 18 not upgraded.\n","stderr":"","merged_output":"Reading package lists...\nBuilding dependency tree...\nReading state information...\ncurl is already the newest version (7.88.1-10+deb12u12).\nwget is already the newest version (1.21.3-1+deb12u1).\ngit is already the newest version (1:2.39.5-0+deb12u2).\nvim is already the newest version (2:9.0.1378-2+deb12u2).\nhtop is already the newest version (3.2.2-2).\napt-transport-https is already the newest version (2.6.1).\nca-certificates is already the newest version (20230311+deb12u1).\nsoftware-properties-common is already the newest version (0.99.30-4.1~deb12u1).\n0 upgraded, 0 newly installed, 0 to remove and 18 not upgraded.\n","exit_code":0}}
2025-06-18T22:00:03.598619 INFO   [exec-worker-3] [Bolt::Executor] {"target":"pi-worker-1","action":"command","object":"apt-get install -y curl wget git vim htop apt-transport-https ca-certificates software-properties-common","status":"success","value":{"stdout":"Reading package lists...\nBuilding dependency tree...\nReading state information...\ncurl is already the newest version (7.88.1-10+deb12u12).\nwget is already the newest version (1.21.3-1+deb12u1).\ngit is already the newest version (1:2.39.5-0+deb12u2).\nvim is already the newest version (2:9.0.1378-2+deb12u2).\nhtop is already the newest version (3.2.2-2).\napt-transport-https is already the newest version (2.6.1).\nca-certificates is already the newest version (20230311+deb12u1).\nsoftware-properties-common is already the newest version (0.99.30-4.1~deb12u1).\n0 upgraded, 0 newly installed, 0 to remove and 18 not upgraded.\n","stderr":"","merged_output":"Reading package lists...\nBuilding dependency tree...\nReading state information...\ncurl is already the newest version (7.88.1-10+deb12u12).\nwget is already the newest version (1.21.3-1+deb12u1).\ngit is already the newest version (1:2.39.5-0+deb12u2).\nvim is already the newest version (2:9.0.1378-2+deb12u2).\nhtop is already the newest version (3.2.2-2).\napt-transport-https is already the newest version (2.6.1).\nca-certificates is already the newest version (20230311+deb12u1).\nsoftware-properties-common is already the newest version (0.99.30-4.1~deb12u1).\n0 upgraded, 0 newly installed, 0 to remove and 18 not upgraded.\n","exit_code":0}}
2025-06-18T22:00:03.614121 INFO   [exec-worker-2] [Bolt::Executor] {"target":"pi-master","action":"command","object":"apt-get install -y curl wget git vim htop apt-transport-https ca-certificates software-properties-common","status":"success","value":{"stdout":"Reading package lists...\nBuilding dependency tree...\nReading state information...\ncurl is already the newest version (7.88.1-10+deb12u12).\nwget is already the newest version (1.21.3-1+deb12u1).\ngit is already the newest version (1:2.39.5-0+deb12u2).\nvim is already the newest version (2:9.0.1378-2+deb12u2).\nhtop is already the newest version (3.2.2-2).\napt-transport-https is already the newest version (2.6.1).\nca-certificates is already the newest version (20230311+deb12u1).\nsoftware-properties-common is already the newest version (0.99.30-4.1~deb12u1).\n0 upgraded, 0 newly installed, 0 to remove and 18 not upgraded.\n","stderr":"","merged_output":"Reading package lists...\nBuilding dependency tree...\nReading state information...\ncurl is already the newest version (7.88.1-10+deb12u12).\nwget is already the newest version (1.21.3-1+deb12u1).\ngit is already the newest version (1:2.39.5-0+deb12u2).\nvim is already the newest version (2:9.0.1378-2+deb12u2).\nhtop is already the newest version (3.2.2-2).\napt-transport-https is already the newest version (2.6.1).\nca-certificates is already the newest version (20230311+deb12u1).\nsoftware-properties-common is already the newest version (0.99.30-4.1~deb12u1).\n0 upgraded, 0 newly installed, 0 to remove and 18 not upgraded.\n","exit_code":0}}
2025-06-18T22:00:03.621053 INFO   [exec-worker-4] [Bolt::Executor] {"target":"pi-worker-3","action":"command","object":"apt-get install -y curl wget git vim htop apt-transport-https ca-certificates software-properties-common","status":"success","value":{"stdout":"Reading package lists...\nBuilding dependency tree...\nReading state information...\ncurl is already the newest version (7.88.1-10+deb12u12).\nwget is already the newest version (1.21.3-1+deb12u1).\ngit is already the newest version (1:2.39.5-0+deb12u2).\nvim is already the newest version (2:9.0.1378-2+deb12u2).\nhtop is already the newest version (3.2.2-2).\napt-transport-https is already the newest version (2.6.1).\nca-certificates is already the newest version (20230311+deb12u1).\nsoftware-properties-common is already the newest version (0.99.30-4.1~deb12u1).\n0 upgraded, 0 newly installed, 0 to remove and 18 not upgraded.\n","stderr":"","merged_output":"Reading package lists...\nBuilding dependency tree...\nReading state information...\ncurl is already the newest version (7.88.1-10+deb12u12).\nwget is already the newest version (1.21.3-1+deb12u1).\ngit is already the newest version (1:2.39.5-0+deb12u2).\nvim is already the newest version (2:9.0.1378-2+deb12u2).\nhtop is already the newest version (3.2.2-2).\napt-transport-https is already the newest version (2.6.1).\nca-certificates is already the newest version (20230311+deb12u1).\nsoftware-properties-common is already the newest version (0.99.30-4.1~deb12u1).\n0 upgraded, 0 newly installed, 0 to remove and 18 not upgraded.\n","exit_code":0}}
2025-06-18T22:00:03.622020 INFO   [exec-worker-4] [Bolt::Executor] Running command 'if ! grep -q "cgroup_enable=memory" /boot/cmdline.txt; then sed -i 's/$/ cgroup_enable=cpuset cgroup_enable=memory cgroup_memory=1/' /boot/cmdline.txt; echo "Cgroups enabled - reboot required"; fi' on ["pi-master"]
2025-06-18T22:00:03.622406 DEBUG  [exec-worker-4] [Bolt::Transport::SSH] Running command 'if ! grep -q "cgroup_enable=memory" /boot/cmdline.txt; then sed -i 's/$/ cgroup_enable=cpuset cgroup_enable=memory cgroup_memory=1/' /boot/cmdline.txt; echo "Cgroups enabled - reboot required"; fi' on pi-master
2025-06-18T22:00:03.622117 INFO   [exec-worker-3] [Bolt::Executor] Running command 'if ! grep -q "cgroup_enable=memory" /boot/cmdline.txt; then sed -i 's/$/ cgroup_enable=cpuset cgroup_enable=memory cgroup_memory=1/' /boot/cmdline.txt; echo "Cgroups enabled - reboot required"; fi' on ["pi-worker-2"]
2025-06-18T22:00:03.623738 DEBUG  [exec-worker-3] [Bolt::Transport::SSH] Running command 'if ! grep -q "cgroup_enable=memory" /boot/cmdline.txt; then sed -i 's/$/ cgroup_enable=cpuset cgroup_enable=memory cgroup_memory=1/' /boot/cmdline.txt; echo "Cgroups enabled - reboot required"; fi' on pi-worker-2
2025-06-18T22:00:03.622237 INFO   [event-publisher] [Bolt::Outputter::Logger] Finished: command 'apt-get install -y curl wget git vim htop apt-transport-https ca-certificates software-properties-common' with 0 failures in 1.17 sec
2025-06-18T22:00:03.622069 INFO   [exec-worker-2] [Bolt::Executor] Running command 'if ! grep -q "cgroup_enable=memory" /boot/cmdline.txt; then sed -i 's/$/ cgroup_enable=cpuset cgroup_enable=memory cgroup_memory=1/' /boot/cmdline.txt; echo "Cgroups enabled - reboot required"; fi' on ["pi-worker-1"]
2025-06-18T22:00:03.625680 DEBUG  [exec-worker-2] [Bolt::Transport::SSH] Running command 'if ! grep -q "cgroup_enable=memory" /boot/cmdline.txt; then sed -i 's/$/ cgroup_enable=cpuset cgroup_enable=memory cgroup_memory=1/' /boot/cmdline.txt; echo "Cgroups enabled - reboot required"; fi' on pi-worker-1
2025-06-18T22:00:03.625337 INFO   [event-publisher] [Bolt::Outputter::Logger] Starting: command 'if ! grep -q "cgroup_enable=memory" /boot/cmdline.txt; then sed -i 's/$/ cgroup_enable=cpuset cgroup_enable=memory cgroup_memory=1/' /boot/cmdline.txt; echo "Cgroups enabled - reboot required"; fi' on pi-master, pi-worker-1, pi-worker-2, pi-worker-3
2025-06-18T22:00:03.625455 DEBUG  [exec-worker-4] [pi-master] Disabling use_agent in net-ssh: ssh-agent is not available
2025-06-18T22:00:03.622183 INFO   [exec-worker-1] [Bolt::Executor] Running command 'if ! grep -q "cgroup_enable=memory" /boot/cmdline.txt; then sed -i 's/$/ cgroup_enable=cpuset cgroup_enable=memory cgroup_memory=1/' /boot/cmdline.txt; echo "Cgroups enabled - reboot required"; fi' on ["pi-worker-3"]
2025-06-18T22:00:03.627426 DEBUG  [exec-worker-1] [Bolt::Transport::SSH] Running command 'if ! grep -q "cgroup_enable=memory" /boot/cmdline.txt; then sed -i 's/$/ cgroup_enable=cpuset cgroup_enable=memory cgroup_memory=1/' /boot/cmdline.txt; echo "Cgroups enabled - reboot required"; fi' on pi-worker-3
2025-06-18T22:00:03.626347 DEBUG  [exec-worker-3] [pi-worker-2] Disabling use_agent in net-ssh: ssh-agent is not available
2025-06-18T22:00:03.628035 DEBUG  [exec-worker-2] [pi-worker-1] Disabling use_agent in net-ssh: ssh-agent is not available
2025-06-18T22:00:03.629353 DEBUG  [exec-worker-1] [pi-worker-3] Disabling use_agent in net-ssh: ssh-agent is not available
2025-06-18T22:00:03.794092 INFO   [exec-worker-2] [Bolt::Executor] {"target":"pi-worker-1","action":"command","object":"if ! grep -q \"cgroup_enable=memory\" /boot/cmdline.txt; then sed -i 's/$/ cgroup_enable=cpuset cgroup_enable=memory cgroup_memory=1/' /boot/cmdline.txt; echo \"Cgroups enabled - reboot required\"; fi","status":"success","value":{"stdout":"","stderr":"","merged_output":"","exit_code":0}}
2025-06-18T22:00:03.810226 INFO   [exec-worker-3] [Bolt::Executor] {"target":"pi-worker-2","action":"command","object":"if ! grep -q \"cgroup_enable=memory\" /boot/cmdline.txt; then sed -i 's/$/ cgroup_enable=cpuset cgroup_enable=memory cgroup_memory=1/' /boot/cmdline.txt; echo \"Cgroups enabled - reboot required\"; fi","status":"success","value":{"stdout":"","stderr":"","merged_output":"","exit_code":0}}
2025-06-18T22:00:03.810813 INFO   [exec-worker-4] [Bolt::Executor] {"target":"pi-master","action":"command","object":"if ! grep -q \"cgroup_enable=memory\" /boot/cmdline.txt; then sed -i 's/$/ cgroup_enable=cpuset cgroup_enable=memory cgroup_memory=1/' /boot/cmdline.txt; echo \"Cgroups enabled - reboot required\"; fi","status":"success","value":{"stdout":"","stderr":"","merged_output":"","exit_code":0}}
2025-06-18T22:00:03.839592 INFO   [exec-worker-1] [Bolt::Executor] {"target":"pi-worker-3","action":"command","object":"if ! grep -q \"cgroup_enable=memory\" /boot/cmdline.txt; then sed -i 's/$/ cgroup_enable=cpuset cgroup_enable=memory cgroup_memory=1/' /boot/cmdline.txt; echo \"Cgroups enabled - reboot required\"; fi","status":"success","value":{"stdout":"","stderr":"","merged_output":"","exit_code":0}}
2025-06-18T22:00:03.840850 INFO   [exec-worker-1] [Bolt::Executor] Running command 'systemctl disable dphys-swapfile || true' on ["pi-master"]
2025-06-18T22:00:03.841408 DEBUG  [exec-worker-1] [Bolt::Transport::SSH] Running command 'systemctl disable dphys-swapfile || true' on pi-master
2025-06-18T22:00:03.840971 INFO   [exec-worker-3] [Bolt::Executor] Running command 'systemctl disable dphys-swapfile || true' on ["pi-worker-2"]
2025-06-18T22:00:03.842532 DEBUG  [exec-worker-3] [Bolt::Transport::SSH] Running command 'systemctl disable dphys-swapfile || true' on pi-worker-2
2025-06-18T22:00:03.841199 INFO   [event-publisher] [Bolt::Outputter::Logger] Finished: command 'if ! grep -q "cgroup_enable=memory" /boot/cmdline.txt; then sed -i 's/$/ cgroup_enable=cpuset cgroup_enable=memory cgroup_memory=1/' /boot/cmdline.txt; echo "Cgroups enabled - reboot required"; fi' with 0 failures in 0.22 sec
2025-06-18T22:00:03.840917 INFO   [exec-worker-4] [Bolt::Executor] Running command 'systemctl disable dphys-swapfile || true' on ["pi-worker-1"]
2025-06-18T22:00:03.844918 DEBUG  [exec-worker-4] [Bolt::Transport::SSH] Running command 'systemctl disable dphys-swapfile || true' on pi-worker-1
2025-06-18T22:00:03.844605 INFO   [event-publisher] [Bolt::Outputter::Logger] Starting: command 'systemctl disable dphys-swapfile || true' on pi-master, pi-worker-1, pi-worker-2, pi-worker-3
2025-06-18T22:00:03.844793 DEBUG  [exec-worker-1] [pi-master] Disabling use_agent in net-ssh: ssh-agent is not available
2025-06-18T22:00:03.841126 INFO   [exec-worker-2] [Bolt::Executor] Running command 'systemctl disable dphys-swapfile || true' on ["pi-worker-3"]
2025-06-18T22:00:03.846850 DEBUG  [exec-worker-2] [Bolt::Transport::SSH] Running command 'systemctl disable dphys-swapfile || true' on pi-worker-3
2025-06-18T22:00:03.847278 DEBUG  [exec-worker-4] [pi-worker-1] Disabling use_agent in net-ssh: ssh-agent is not available
2025-06-18T22:00:03.845265 DEBUG  [exec-worker-3] [pi-worker-2] Disabling use_agent in net-ssh: ssh-agent is not available
2025-06-18T22:00:03.849019 DEBUG  [exec-worker-2] [pi-worker-3] Disabling use_agent in net-ssh: ssh-agent is not available
2025-06-18T22:00:04.573955 INFO   [exec-worker-2] [Bolt::Executor] {"target":"pi-worker-3","action":"command","object":"systemctl disable dphys-swapfile || true","status":"success","value":{"stdout":"","stderr":"Synchronizing state of dphys-swapfile.service with SysV service script with /lib/systemd/systemd-sysv-install.\nExecuting: /lib/systemd/systemd-sysv-install disable dphys-swapfile\n","merged_output":"Synchronizing state of dphys-swapfile.service with SysV service script with /lib/systemd/systemd-sysv-install.\nExecuting: /lib/systemd/systemd-sysv-install disable dphys-swapfile\n","exit_code":0}}
2025-06-18T22:00:04.576732 INFO   [exec-worker-1] [Bolt::Executor] {"target":"pi-master","action":"command","object":"systemctl disable dphys-swapfile || true","status":"success","value":{"stdout":"","stderr":"Synchronizing state of dphys-swapfile.service with SysV service script with /lib/systemd/systemd-sysv-install.\nExecuting: /lib/systemd/systemd-sysv-install disable dphys-swapfile\n","merged_output":"Synchronizing state of dphys-swapfile.service with SysV service script with /lib/systemd/systemd-sysv-install.\nExecuting: /lib/systemd/systemd-sysv-install disable dphys-swapfile\n","exit_code":0}}
2025-06-18T22:00:04.581654 INFO   [exec-worker-4] [Bolt::Executor] {"target":"pi-worker-1","action":"command","object":"systemctl disable dphys-swapfile || true","status":"success","value":{"stdout":"","stderr":"Synchronizing state of dphys-swapfile.service with SysV service script with /lib/systemd/systemd-sysv-install.\nExecuting: /lib/systemd/systemd-sysv-install disable dphys-swapfile\n","merged_output":"Synchronizing state of dphys-swapfile.service with SysV service script with /lib/systemd/systemd-sysv-install.\nExecuting: /lib/systemd/systemd-sysv-install disable dphys-swapfile\n","exit_code":0}}
2025-06-18T22:00:04.583266 INFO   [exec-worker-3] [Bolt::Executor] {"target":"pi-worker-2","action":"command","object":"systemctl disable dphys-swapfile || true","status":"success","value":{"stdout":"","stderr":"Synchronizing state of dphys-swapfile.service with SysV service script with /lib/systemd/systemd-sysv-install.\nExecuting: /lib/systemd/systemd-sysv-install disable dphys-swapfile\n","merged_output":"Synchronizing state of dphys-swapfile.service with SysV service script with /lib/systemd/systemd-sysv-install.\nExecuting: /lib/systemd/systemd-sysv-install disable dphys-swapfile\n","exit_code":0}}
2025-06-18T22:00:04.584605 INFO   [exec-worker-3] [Bolt::Executor] Running command 'dphys-swapfile swapoff || true' on ["pi-master"]
2025-06-18T22:00:04.585278 INFO   [event-publisher] [Bolt::Outputter::Logger] Finished: command 'systemctl disable dphys-swapfile || true' with 0 failures in 0.74 sec
2025-06-18T22:00:04.584886 INFO   [exec-worker-4] [Bolt::Executor] Running command 'dphys-swapfile swapoff || true' on ["pi-worker-1"]
2025-06-18T22:00:04.586495 DEBUG  [exec-worker-4] [Bolt::Transport::SSH] Running command 'dphys-swapfile swapoff || true' on pi-worker-1
2025-06-18T22:00:04.584749 INFO   [exec-worker-1] [Bolt::Executor] Running command 'dphys-swapfile swapoff || true' on ["pi-worker-2"]
2025-06-18T22:00:04.588098 DEBUG  [exec-worker-1] [Bolt::Transport::SSH] Running command 'dphys-swapfile swapoff || true' on pi-worker-2
2025-06-18T22:00:04.586042 INFO   [event-publisher] [Bolt::Outputter::Logger] Starting: command 'dphys-swapfile swapoff || true' on pi-master, pi-worker-1, pi-worker-2, pi-worker-3
2025-06-18T22:00:04.588937 DEBUG  [exec-worker-4] [pi-worker-1] Disabling use_agent in net-ssh: ssh-agent is not available
2025-06-18T22:00:04.585436 DEBUG  [exec-worker-3] [Bolt::Transport::SSH] Running command 'dphys-swapfile swapoff || true' on pi-master
2025-06-18T22:00:04.584493 INFO   [exec-worker-2] [Bolt::Executor] Running command 'dphys-swapfile swapoff || true' on ["pi-worker-3"]
2025-06-18T22:00:04.591250 DEBUG  [exec-worker-2] [Bolt::Transport::SSH] Running command 'dphys-swapfile swapoff || true' on pi-worker-3
2025-06-18T22:00:04.591358 DEBUG  [exec-worker-1] [pi-worker-2] Disabling use_agent in net-ssh: ssh-agent is not available
2025-06-18T22:00:04.593739 DEBUG  [exec-worker-3] [pi-master] Disabling use_agent in net-ssh: ssh-agent is not available
2025-06-18T22:00:04.594089 DEBUG  [exec-worker-2] [pi-worker-3] Disabling use_agent in net-ssh: ssh-agent is not available
2025-06-18T22:00:04.770062 INFO   [exec-worker-4] [Bolt::Executor] {"target":"pi-worker-1","action":"command","object":"dphys-swapfile swapoff || true","status":"success","value":{"stdout":"","stderr":"","merged_output":"","exit_code":0}}
2025-06-18T22:00:04.770759 INFO   [exec-worker-2] [Bolt::Executor] {"target":"pi-worker-3","action":"command","object":"dphys-swapfile swapoff || true","status":"success","value":{"stdout":"","stderr":"","merged_output":"","exit_code":0}}
2025-06-18T22:00:04.781930 INFO   [exec-worker-3] [Bolt::Executor] {"target":"pi-master","action":"command","object":"dphys-swapfile swapoff || true","status":"success","value":{"stdout":"","stderr":"","merged_output":"","exit_code":0}}
2025-06-18T22:00:04.783079 INFO   [exec-worker-1] [Bolt::Executor] {"target":"pi-worker-2","action":"command","object":"dphys-swapfile swapoff || true","status":"success","value":{"stdout":"","stderr":"","merged_output":"","exit_code":0}}
2025-06-18T22:00:04.784173 INFO   [exec-worker-1] [Bolt::Executor] Running command 'curl -sfL https://get.k3s.io | INSTALL_K3S_VERSION=v1.28.4+k3s1 sh -s - server --write-kubeconfig-mode 644 --disable traefik --disable servicelb' on ["pi-master"]
2025-06-18T22:00:04.784866 DEBUG  [exec-worker-1] [Bolt::Transport::SSH] Running command 'curl -sfL https://get.k3s.io | INSTALL_K3S_VERSION=v1.28.4+k3s1 sh -s - server --write-kubeconfig-mode 644 --disable traefik --disable servicelb' on pi-master
2025-06-18T22:00:04.784471 INFO   [event-publisher] [Bolt::Outputter::Logger] Finished: command 'dphys-swapfile swapoff || true' with 0 failures in 0.2 sec
2025-06-18T22:00:04.786589 INFO   [event-publisher] [Bolt::Outputter::Logger] Phase 2: Installing K3s on master nodes
2025-06-18T22:00:04.786983 INFO   [event-publisher] [Bolt::Outputter::Logger] Starting: command 'curl -sfL https://get.k3s.io | INSTALL_K3S_VERSION=v1.28.4+k3s1 sh -s - server --write-kubeconfig-mode 644 --disable traefik --disable servicelb' on pi-master
2025-06-18T22:00:04.787517 DEBUG  [exec-worker-1] [pi-master] Disabling use_agent in net-ssh: ssh-agent is not available
2025-06-18T22:00:06.644068 INFO   [exec-worker-1] [Bolt::Executor] {"target":"pi-master","action":"command","object":"curl -sfL https://get.k3s.io | INSTALL_K3S_VERSION=v1.28.4+k3s1 sh -s - server --write-kubeconfig-mode 644 --disable traefik --disable servicelb","status":"success","value":{"stdout":"[INFO]  Using v1.28.4+k3s1 as release\n[INFO]  Downloading hash https://github.com/k3s-io/k3s/releases/download/v1.28.4+k3s1/sha256sum-arm64.txt\n[INFO]  Skipping binary downloaded, installed k3s matches hash\n[INFO]  Skipping installation of SELinux RPM\n[INFO]  Skipping /usr/local/bin/kubectl symlink to k3s, already exists\n[INFO]  Skipping /usr/local/bin/crictl symlink to k3s, already exists\n[INFO]  Skipping /usr/local/bin/ctr symlink to k3s, command exists in PATH at /usr/bin/ctr\n[INFO]  Creating killall script /usr/local/bin/k3s-killall.sh\n[INFO]  Creating uninstall script /usr/local/bin/k3s-uninstall.sh\n[INFO]  env: Creating environment file /etc/systemd/system/k3s.service.env\n[INFO]  systemd: Creating service file /etc/systemd/system/k3s.service\n[INFO]  systemd: Enabling k3s unit\n[INFO]  No change detected so skipping service start\n","stderr":"Created symlink /etc/systemd/system/multi-user.target.wants/k3s.service → /etc/systemd/system/k3s.service.\n","merged_output":"[INFO]  Using v1.28.4+k3s1 as release\n[INFO]  Downloading hash https://github.com/k3s-io/k3s/releases/download/v1.28.4+k3s1/sha256sum-arm64.txt\n[INFO]  Skipping binary downloaded, installed k3s matches hash\n[INFO]  Skipping installation of SELinux RPM\n[INFO]  Skipping /usr/local/bin/kubectl symlink to k3s, already exists\n[INFO]  Skipping /usr/local/bin/crictl symlink to k3s, already exists\n[INFO]  Skipping /usr/local/bin/ctr symlink to k3s, command exists in PATH at /usr/bin/ctr\n[INFO]  Creating killall script /usr/local/bin/k3s-killall.sh\n[INFO]  Creating uninstall script /usr/local/bin/k3s-uninstall.sh\n[INFO]  env: Creating environment file /etc/systemd/system/k3s.service.env\n[INFO]  systemd: Creating service file /etc/systemd/system/k3s.service\n[INFO]  systemd: Enabling k3s unit\nCreated symlink /etc/systemd/system/multi-user.target.wants/k3s.service → /etc/systemd/system/k3s.service.\n[INFO]  No change detected so skipping service start\n","exit_code":0}}
2025-06-18T22:00:06.646129 INFO   [event-publisher] [Bolt::Outputter::Logger] Finished: command 'curl -sfL https://get.k3s.io | INSTALL_K3S_VERSION=v1.28.4+k3s1 sh -s - server --write-kubeconfig-mode 644 --disable traefik --disable servicelb' with 0 failures in 1.86 sec
2025-06-18T22:00:06.646953 INFO   [event-publisher] [Bolt::Outputter::Logger] Waiting for K3s server to be ready...
2025-06-18T22:00:06.646218 INFO   [exec-worker-1] [Bolt::Executor] Running command 'while ! kubectl get nodes; do sleep 5; done' on ["pi-master"]
2025-06-18T22:00:06.648657 DEBUG  [exec-worker-1] [Bolt::Transport::SSH] Running command 'while ! kubectl get nodes; do sleep 5; done' on pi-master
2025-06-18T22:00:06.647759 INFO   [event-publisher] [Bolt::Outputter::Logger] Starting: command 'while ! kubectl get nodes; do sleep 5; done' on pi-master
2025-06-18T22:00:06.651748 DEBUG  [exec-worker-1] [pi-master] Disabling use_agent in net-ssh: ssh-agent is not available
2025-06-18T22:00:06.965964 INFO   [exec-worker-1] [Bolt::Executor] {"target":"pi-master","action":"command","object":"while ! kubectl get nodes; do sleep 5; done","status":"success","value":{"stdout":"NAME        STATUS                     ROLES                  AGE     VERSION\npi-master   Ready,SchedulingDisabled   control-plane,master   2d18h   v1.28.4+k3s1\n","stderr":"","merged_output":"NAME        STATUS                     ROLES                  AGE     VERSION\npi-master   Ready,SchedulingDisabled   control-plane,master   2d18h   v1.28.4+k3s1\n","exit_code":0}}
2025-06-18T22:00:06.967392 INFO   [exec-worker-1] [Bolt::Executor] Running command 'cat /var/lib/rancher/k3s/server/node-token' on ["pi-master"]
2025-06-18T22:00:06.967928 DEBUG  [exec-worker-1] [Bolt::Transport::SSH] Running command 'cat /var/lib/rancher/k3s/server/node-token' on pi-master
2025-06-18T22:00:06.967529 INFO   [event-publisher] [Bolt::Outputter::Logger] Finished: command 'while ! kubectl get nodes; do sleep 5; done' with 0 failures in 0.32 sec
2025-06-18T22:00:06.969394 INFO   [event-publisher] [Bolt::Outputter::Logger] Getting K3s token for worker nodes
2025-06-18T22:00:06.970056 INFO   [event-publisher] [Bolt::Outputter::Logger] Starting: command 'cat /var/lib/rancher/k3s/server/node-token' on pi-master
2025-06-18T22:00:06.971749 DEBUG  [exec-worker-1] [pi-master] Disabling use_agent in net-ssh: ssh-agent is not available
2025-06-18T22:00:07.155507 INFO   [exec-worker-1] [Bolt::Executor] {"target":"pi-master","action":"command","object":"cat /var/lib/rancher/k3s/server/node-token","status":"success","value":{"stdout":"K10f85c930e1647ab73f6dcc836d62c2987867a7d895a4faf4b15c44458be19c754::server:b023710b5e42e351997d4e12cbe84525\n","stderr":"","merged_output":"K10f85c930e1647ab73f6dcc836d62c2987867a7d895a4faf4b15c44458be19c754::server:b023710b5e42e351997d4e12cbe84525\n","exit_code":0}}
2025-06-18T22:00:07.158784 INFO   [event-publisher] [Bolt::Outputter::Logger] Finished: command 'cat /var/lib/rancher/k3s/server/node-token' with 0 failures in 0.19 sec
2025-06-18T22:00:07.159643 INFO   [event-publisher] [Bolt::Outputter::Logger] Finished: plan pi_cluster_automation::deploy in 6.68 sec
